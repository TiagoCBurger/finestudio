0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4581
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 1022ms
[Next.js] üîç ProjectProvider state changed: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   hasData: true,
[Next.js]   isLoading: true,
[Next.js]   hasError: false,
[Next.js]   contentNodeCount: 6
[Next.js] }
[Next.js] Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044
[Next.js]  GET /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 2963ms
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  GET /api/fal-jobs?projectId=fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 2395ms
[Next.js]  GET /api/fal-jobs?projectId=fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 2356ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4582
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 1983ms
[Next.js]  GET /api/projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 4467ms
[Next.js] üîç ProjectProvider state changed: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   hasData: true,
[Next.js]   isLoading: true,
[Next.js]   hasError: false,
[Next.js]   contentNodeCount: 6
[Next.js] }
[Next.js] Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044
[Next.js]  GET /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 2625ms
[Next.js]  GET /api/fal-jobs?projectId=fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 555ms
[Next.js]  GET /api/fal-jobs?projectId=fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 585ms
[Next.js]  GET /api/projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 945ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4582
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 505ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4235
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 1227ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4534
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 616ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4556
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 517ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4582
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 513ms
[Next.js] üîç KIE model detected: {
[Next.js]   modelId: 'kie-nano-banana',
[Next.js]   hasEditModel: true,
[Next.js]   editModelId: 'google/nano-banana-edit'
[Next.js] }
[Next.js] üîÑ Switching KIE model from google/nano-banana to google/nano-banana-edit for editing
[Next.js] üîÑ Switching KIE model from google/nano-banana-edit to google/nano-banana-edit for edit operation
[Next.js] üîç KIE image_size: { size: '1:1', modelId: 'google/nano-banana-edit' }
[Next.js] üñºÔ∏è Adding 1 image(s) to KIE edit request
[Next.js] üîç Kie.ai queue request: {
[Next.js]   modelId: 'google/nano-banana-edit',
[Next.js]   isEditModel: true,
[Next.js]   hasImage: true,
[Next.js]   hasImages: true,
[Next.js]   imageCount: 1,
[Next.js]   inputKeys: [ 'prompt', 'output_format', 'image_size', 'image_urls' ],
[Next.js]   fullInput: '{\n' +
[Next.js]     '  "prompt": "Teste",\n' +
[Next.js]     '  "output_format": "png",\n' +
[Next.js]     '  "image_size": "1:1",\n' +
[Next.js]     '  "image_urls": [\n' +
[Next.js]     '    "https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/JtYOrBW1-53nuouPNUCCn.png"\n' +
[Next.js]     '  ]\n' +
[Next.js]     '}'
[Next.js] }
[Next.js] üöÄ Kie.ai submission mode: {
[Next.js]   mode: 'WEBHOOK (required)',
[Next.js]   webhookUrl: 'https://sturdier-biaxially-lila.ngrok-free.dev/api/webhooks/kie',
[Next.js]   hasAppUrl: true,
[Next.js]   appUrl: 'https://sturdier-biaxially-lila.ngrok-free.dev'
[Next.js] }
[Next.js] Pre-creating Kie.ai job to avoid race condition...
[Next.js] Kie.ai job pre-created with ID: 1f4a48e4-7db7-4c51-9f59-5f486fbca18c
[Next.js] üì• Kie.ai API response: {
[Next.js]   fullResponse: '{\n' +
[Next.js]     '  "code": 200,\n' +
[Next.js]     '  "msg": "success",\n' +
[Next.js]     '  "data": {\n' +
[Next.js]     '    "taskId": "5cd4bc7f95a5e023cb88dc0cd20a6e07",\n' +
[Next.js]     '    "recordId": "5cd4bc7f95a5e023cb88dc0cd20a6e07"\n' +
[Next.js]     '  }\n' +
[Next.js]     '}',
[Next.js]   hasData: true,
[Next.js]   dataKeys: [ 'taskId', 'recordId' ],
[Next.js]   topLevelKeys: [ 'code', 'msg', 'data' ]
[Next.js] }
[Next.js] Kie.ai queue submitted: { request_id: '5cd4bc7f95a5e023cb88dc0cd20a6e07', useWebhook: true }
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 6807ms
[Next.js] üîî KIE.ai webhook received (raw): {
[Next.js]   hasContent: true,
[Next.js]   contentLength: 749,
[Next.js]   contentPreview: '{"code":200,"data":{"completeTime":1761248926000,"costTime":23,"createTime":1761248902000,"model":"google/nano-banana-edit","param":"{\\"input\\":{\\"output_format\\":\\"png\\",\\"image_size\\":\\"1:1\\",\\"imag'
[Next.js] }
[Next.js] üîî KIE.ai webhook parsed: {
[Next.js]   hasBody: true,
[Next.js]   bodyKeys: [ 'code', 'data', 'msg' ],
[Next.js]   fullBody: '{\n' +
[Next.js]     '  "code": 200,\n' +
[Next.js]     '  "data": {\n' +
[Next.js]     '    "completeTime": 1761248926000,\n' +
[Next.js]     '    "costTime": 23,\n' +
[Next.js]     '    "createTime": 1761248902000,\n' +
[Next.js]     '    "model": "google/nano-banana-edit",\n' +
[Next.js]     '    "param": "{\\"input\\":{\\"output_format\\":\\"png\\",\\"image_size\\":\\"1:1\\",\\"image_urls\\":[\\"https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/JtYOrBW1-53nuouPNUCCn.png\\"],\\"prompt\\":\\"Teste\\"},\\"callBackUrl\\":\\"https://sturdier-biaxially-lila.ngrok-free.dev/api/webhooks/kie\\",\\"model\\":\\"google/nano-banana-edit\\"}",\n' +
[Next.js]     '    "resultJson": "{\\"resultUrls\\":[\\"https://tempfile.aiquickdraw.com/workers/nano/image_1761248924989_l5zgjw_1x1_1024x1024.png\\"]}",\n' +
[Next.js]     '    "state": "success",\n' +
[Next.js]     '    "taskId": "5cd4bc7f95a5e023cb88dc0cd20a6e07",\n' +
[Next.js]     '    "updateTime": 1761248926000\n' +
[Next.js]     '  },\n' +
[Next.js]     '  "msg": "Playground task completed successfully."\n' +
[Next.js]     '}'
[Next.js] }
[Next.js] üîç Processing KIE.ai webhook: {
[Next.js]   requestId: '5cd4bc7f95a5e023cb88dc0cd20a6e07',
[Next.js]   status: 'completed',
[Next.js]   hasResult: true,
[Next.js]   hasError: false
[Next.js] }
[Next.js] ‚úÖ Found job: {
[Next.js]   jobId: '1f4a48e4-7db7-4c51-9f59-5f486fbca18c',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   modelId: 'google/nano-banana-edit',
[Next.js]   type: 'image',
[Next.js]   currentStatus: 'pending'
[Next.js] }
[Next.js] ‚úÖ Job completed successfully, processing result...
[Next.js] üñºÔ∏è Extracted image URL: https://tempfile.aiquickdraw.com/workers/nano/imag...
[Next.js] üì§ Uploading image to storage...
[Next.js] ‚úÖ Image downloaded, size: 2394077 bytes
[Next.js] ‚úÖ Image uploaded to storage: https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/6jbREZ0jKfrvGEJTQyVHw.png
[Next.js] üîÑ Calling updateProjectNode...
[Next.js] üìù Updating project node with permanent URL...
[Next.js] ‚úÖ Project node updated successfully, realtime should trigger now
[Next.js] üìä Project update result: { success: true, message: 'Project updated successfully' }
[Next.js] ‚úÖ Webhook processing complete, returning success response
[Next.js]  POST /api/webhooks/kie 200 in 4386ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4597
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 605ms
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
[Next.js] üîµ Chat API - Request received
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 4586
[Next.js] }
[Next.js] ‚úÖ User authenticated: e04931a4-b423-449f-8cc5-d7574b79028c
[Next.js] üì¶ Request body: {
[Next.js]   "messages": [
[Next.js]     {
[Next.js]       "role": "user",
[Next.js]       "text": "--- Instructions ---\nDiga oi",
[Next.js]       "files": [
[Next.js]         {
[Next.js]           "mediaType": "image/png",
[Next.js]           "url": "https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/W4spkM8uKZtWCD4TGN6hz.png",
[Next.js]           "type": "file"
[Next.js]         }
[Next.js]       ]
[Next.js]     }
[Next.js]   ],
[Next.js]   "modelId": "google/gemini-2.5-pro"
[Next.js] }
[Next.js] Received request body: {
[Next.js]   messages: [
[Next.js]     {
[Next.js]       role: 'user',
[Next.js]       text: '--- Instructions ---\nDiga oi',
[Next.js]       files: [Array]
[Next.js]     }
[Next.js]   ],
[Next.js]   modelId: 'google/gemini-2.5-pro'
[Next.js] }
[Next.js] üìã Model config: Found google/gemini-2.5-pro
[Next.js] ‚úÖ Model config found: {
[Next.js]   id: 'google/gemini-2.5-pro',
[Next.js]   label: 'Gemini 2.5 Pro',
[Next.js]   provider: 'openrouter',
[Next.js]   pricing: { input: '1.25', output: '5.00' },
[Next.js]   enabled: true
[Next.js] }
[Next.js] ‚úÖ OPENROUTER_API_KEY is configured
[Next.js] üöÄ Using OpenRouter DIRECT API for: google/gemini-2.5-pro
[Next.js] RAW MESSAGES RECEIVED: [
[Next.js]   {
[Next.js]     "role": "user",
[Next.js]     "text": "--- Instructions ---\nDiga oi",
[Next.js]     "files": [
[Next.js]       {
[Next.js]         "mediaType": "image/png",
[Next.js]         "url": "https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/W4spkM8uKZtWCD4TGN6hz.png",
[Next.js]         "type": "file"
[Next.js]       }
[Next.js]     ]
[Next.js]   }
[Next.js] ]
[Next.js] Processing message 0: {
[Next.js]   role: 'user',
[Next.js]   text: '--- Instructions ---\nDiga oi',
[Next.js]   files: [
[Next.js]     {
[Next.js]       mediaType: 'image/png',
[Next.js]       url: 'https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/W4spkM8uKZtWCD4TGN6hz.png',
[Next.js]       type: 'file'
[Next.js]     }
[Next.js]   ]
[Next.js] }
[Next.js] Extracted text for message 0: --- Instructions ---
[Next.js] Diga oi
[Next.js] Converted message 0: {
[Next.js]   "role": "user",
[Next.js]   "content": [
[Next.js]     {
[Next.js]       "type": "text",
[Next.js]       "text": "--- Instructions ---\nDiga oi"
[Next.js]     },
[Next.js]     {
[Next.js]       "type": "image_url",
[Next.js]       "image_url": {
[Next.js]         "url": "https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/W4spkM8uKZtWCD4TGN6hz.png"
[Next.js]       }
[Next.js]     }
[Next.js]   ]
[Next.js] }
[Next.js] Message has content? true {
[Next.js]   role: 'user',
[Next.js]   content: [
[Next.js]     { type: 'text', text: '--- Instructions ---\nDiga oi' },
[Next.js]     { type: 'image_url', image_url: [Object] }
[Next.js]   ]
[Next.js] }
[Next.js] FINAL CONVERTED MESSAGES: [
[Next.js]   {
[Next.js]     "role": "user",
[Next.js]     "content": [
[Next.js]       {
[Next.js]         "type": "text",
[Next.js]         "text": "--- Instructions ---\nDiga oi"
[Next.js]       },
[Next.js]       {
[Next.js]         "type": "image_url",
[Next.js]         "image_url": {
[Next.js]           "url": "https://pub-fc1a8343fa6d4aa485c79384d30027c5.r2.dev/files/e04931a4-b423-449f-8cc5-d7574b79028c/W4spkM8uKZtWCD4TGN6hz.png"
[Next.js]         }
[Next.js]       }
[Next.js]     ]
[Next.js]   }
[Next.js] ]
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 3286ms
[Next.js] ‚úÖ OpenRouter response received
[Next.js]  POST /api/chat 200 in 25839ms
[Next.js] Updating project: {
[Next.js]   projectId: 'fb5dec71-5325-40ad-9d38-b4172f8d0486',
[Next.js]   userId: 'e04931a4-b423-449f-8cc5-d7574b79028c',
[Next.js]   hasContent: true,
[Next.js]   contentSize: 3203
[Next.js] }
[Next.js] Project updated successfully: fb5dec71-5325-40ad-9d38-b4172f8d0486
[Next.js]  POST /projects/fb5dec71-5325-40ad-9d38-b4172f8d0486 200 in 697ms
[Next.js]  ‚ö† ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] Critical dependency: the request of a dependency is an expression
[Next.js] 
[Next.js] Import trace for requested module:
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/RealtimeClient.js
[Next.js] ./node_modules/.pnpm/@supabase+realtime-js@2.11.10/node_modules/@supabase/realtime-js/dist/main/index.js
[Next.js] ./node_modules/.pnpm/@supabase+supabase-js@2.50.0/node_modules/@supabase/supabase-js/dist/module/index.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/createBrowserClient.js
[Next.js] ./node_modules/.pnpm/@supabase+ssr@0.6.1_@supabase+supabase-js@2.50.0/node_modules/@supabase/ssr/dist/module/index.js
[Next.js] ./lib/supabase/server.ts
[Next.js] ./app/actions/speech/create.ts
